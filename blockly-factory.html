<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="./blockly-factory-workspace.html">
<link rel="import" href="./blockly-factory-preview.html">
<link rel="import" href="./blockly-factory-editor.html">
<link rel="stylesheet" type="text/css" href="../flexb0x/flexb0x.css">

<dom-module id="blockly-factory">
	<template>
		<style>
			:host {
				position: relative;
				min-width: 1150px;
			}

			blockly-factory-editor {
				border-right: 1px solid #444;
			}
		</style>

		<div id="wrapper" class="fl-full fl-hbox">
			<blockly-factory-editor id="editor" class="fl-fatty"></blockly-factory-editor>
			<div class="fl-vbox" style="width: 600px;">
				<blockly-factory-workspace id="workspace" class="fl-fatty" on-change="onWorkspaceChange_"></blockly-factory-workspace>
				<blockly-factory-preview id="preview" source="workspace" dynamic-height></blockly-factory-preview>
			</div>
		</div>
	</template>

	<script>
		'use strict';

		Polymer({
			is: 'blockly-factory',

			onWorkspaceChange_() {
				this.$.editor.defCode = {
					blockType: 	this.$.workspace.blockType,
					code: 		this.$.workspace.code
				}
			}
		});
	</script>
</dom-module>