<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="./blockly-factory-workspace.html">
<link rel="import" href="./blockly-factory-preview.html">
<link rel="stylesheet" type="text/css" href="../flexb0x/flexb0x.css">

<dom-module id="blockly-factory">
	<template>
		<style>
			:host {
				position: relative;
			}

			#wrapper > * {
				width: 50%;
			}

			#preview {
				height: 150px;
			}
			#preview ::content .blocklyMainBackground {
				stroke: none;
			}

			pre {
				margin: 0;
				padding: 10px;
			}
		</style>

		<div id="wrapper" class="fl-full fl-hbox">
			<blockly-factory-workspace id="workspace" on-change="onWorkspaceChange_"></blockly-factory-workspace>
			<div class="fl-vbox">
				<blockly-factory-preview id="preview" source="workspace"></blockly-factory-preview>
				<pre class="fl-fatty"><code id="code"></code></pre>
			</div>
		</div>
	</template>

	<script>
		'use strict';

		Polymer({
			is: 'blockly-factory',

			onWorkspaceChange_() {
				this.$.code.textContent = this.$.workspace.code;
			}
		});
	</script>
</dom-module>