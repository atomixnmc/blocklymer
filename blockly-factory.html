<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="./blockly-factory-workspace.html">
<link rel="import" href="./blockly-factory-preview.html">
<link rel="import" href="./blockly-factory-editor.html">
<link rel="stylesheet" type="text/css" href="../flexb0x/flexb0x.css">

<dom-module id="blockly-factory">
	<template>
		<style>
			:host {
				position: relative;
			}

			#wrapper > * {
				width: 50%;
			}

			#preview ::content .blocklyMainBackground {
				stroke: none;
			}
		</style>

		<div id="wrapper" class="fl-full fl-hbox">
			<div class="fl-vbox">
				<blockly-factory-workspace id="workspace" class="fl-fatty" on-change="onWorkspaceChange_"></blockly-factory-workspace>
				<blockly-factory-preview id="preview" source="workspace" dynamic-size></blockly-factory-preview>
			</div>
			<blockly-factory-editor id="editor"></blockly-factory-editor>
		</div>
	</template>

	<script>
		'use strict';

		Polymer({
			is: 'blockly-factory',

			onWorkspaceChange_() {
				this.$.editor.code = this.$.workspace.code;
			}
		});
	</script>
</dom-module>